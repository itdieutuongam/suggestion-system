<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>ĐỔI MẬT KHẨU BẮT BUỘC</title>
    <style>
        body {font-family: Arial; background:#fff4e6; padding:40px; margin:0;}
        .box {max-width:520px; margin:auto; background:white; padding:45px; border-radius:20px; 
              box-shadow:0 10px 40px rgba(0,0,0,0.15); border:4px solid #a41017;}
        h2 {color:#a41017; text-align:center; font-size:28px;}
        .warning {background:#fff3e0; padding:20px; border-radius:12px; 
                  border-left:6px solid #a41017; margin:20px 0; text-align:center; font-size:17px;}
        label {display:block; margin:20px 0 8px; font-weight:bold; color:#333;}
        input {width:100%; padding:15px; border:2px solid #ddd; border-radius:10px; font-size:16px;}
        button {width:100%; padding:18px; background:#a41017; color:white; border:none; 
                border-radius:12px; font-size:20px; font-weight:bold; margin-top:30px; cursor:pointer;}
        .info {text-align:center; color:#666; margin-top:20px;}
    </style>
</head>
<body>
<div class="box">
    <h2>ĐỔI MẬT KHẨU</h2>
    <div class="warning">
        <strong>Xin chào {{ user.name }}!</strong><br><br>
        Đây là lần đầu bạn đăng nhập.<br>
        <strong style="color:#a41017;">Bắt buộc phải đổi mật khẩu</strong> để tiếp tục sử dụng hệ thống.
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for cat, msg in messages %}
          <div style="padding:15px; margin:20px 0; background:#ffebee; color:#a41017; 
                      border-left:5px solid #a41017; border-radius:8px;">{{ msg }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <form method="POST">
        <label>Mật khẩu cũ <small>(mặc định: 123456)</small></label>
        <input type="password" name="old_password" value="123456" required>

        <label>Mật khẩu mới <span style="color:red;">*</span></label>
        <input type="password" name="new_password" required minlength="6" placeholder="Tối thiểu 6 ký tự">

        <label>Nhập lại mật khẩu mới</label>
        <input type="password" name="confirm_password" required minlength="6">

        <button type="submit">HOÀN TẤT ĐỔI MẬT KHẨU</button>
    </form>

    <div class="info">Sau khi đổi, bạn sẽ được chuyển đến trang chủ.</div>
</div>
</body>
</html>